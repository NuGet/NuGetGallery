/*! Clamp.js 0.7.0 | Copyright 2011-2013, Joseph Schmitt http://joe.sh | Released under the WTFPL license http://sam.zoy.org/wtfpl/ */
!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.$clamp=t()}(this,function(){function e(e,t){function n(e,t){return c.getComputedStyle||(c.getComputedStyle=function(e,t){return this.el=e,this.getPropertyValue=function(t){var n=/(\-([a-z]){1})/g;return"float"==t&&(t="styleFloat"),n.test(t)&&(t=t.replace(n,function(){return arguments[2].toUpperCase()})),e.currentStyle&&e.currentStyle[t]?e.currentStyle[t]:null},this}),c.getComputedStyle(e,null).getPropertyValue(t)}function i(t){var n=t||e.clientHeight,i=l(e);return Math.max(Math.floor(n/i),0)}function l(e){var t=n(e,"line-height");return"normal"==t&&(t=1.2*parseInt(n(e,"font-size"))),parseInt(t)}function a(t){return t.lastChild.children&&t.lastChild.children.length>0?a(Array.prototype.slice.call(t.children).pop()):t.lastChild&&t.lastChild.nodeValue&&""!==t.lastChild.nodeValue&&t.lastChild.nodeValue!=s.truncationChar?t.lastChild:(t.lastChild.parentNode.removeChild(t.lastChild),a(e))}function r(t,n){if(n){var i=t.nodeValue.replace(s.truncationChar,"");if(m||(y=g.length>0?g.shift():"",m=i.split(y)),m.length>1?(v=m.pop(),o(t,m.join(y))):m=null,u&&(t.nodeValue=t.nodeValue.replace(s.truncationChar,""),e.innerHTML=t.nodeValue+" "+u.innerHTML+s.truncationChar),m){if(e.clientHeight<=n){if(!(g.length>=0&&""!==y))return e.innerHTML;o(t,m.join(y)+y+v),m=null}}else""===y&&(o(t,""),t=a(e),function(){g=s.splitOnChars.slice(0),y=g[0],m=null,v=null}());if(!s.animate)return r(t,n);setTimeout(function(){r(t,n)},!0===s.animate?10:s.animate)}}function o(e,t){e.nodeValue=t+s.truncationChar}t=t||{};var u,c=window,s={clamp:t.clamp||2,useNativeClamp:void 0===t.useNativeClamp||t.useNativeClamp,splitOnChars:t.splitOnChars||[".","-","–","—"," "],animate:t.animate||!1,truncationChar:t.truncationChar||"…",truncationHTML:t.truncationHTML},p=e.style,h=e.innerHTML,d=void 0!==e.style.webkitLineClamp,f=s.clamp,C=f.indexOf&&(f.indexOf("px")>-1||f.indexOf("em")>-1);s.truncationHTML&&((u=document.createElement("span")).innerHTML=s.truncationHTML);var m,v,g=s.splitOnChars.slice(0),y=g[0];"auto"==f?f=i():C&&(f=i(parseInt(f)));var H;if(d&&s.useNativeClamp)p.overflow="hidden",p.textOverflow="ellipsis",p.webkitBoxOrient="vertical",p.display="-webkit-box",p.webkitLineClamp=f,C&&(p.height=s.clamp+"px");else{var x=function(t){return l(e)*t}(f);x<=e.clientHeight&&(H=r(a(e),x))}return{original:h,clamped:H}}return e});