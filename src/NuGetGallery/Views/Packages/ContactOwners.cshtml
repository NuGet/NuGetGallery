@model ContactOwnersViewModel
@{
    ViewBag.Tab = "Packages";
    Layout = "~/Views/Shared/Gallery/Layout.cshtml";
}

<section role="main" class="container main-container page-contact-owners">
    <div class="row">
        <div class="col-sm-offset-1 col-sm-10">
            <h1 class="text-center">Contact the Owners of <a href="@Url.Package(Model.PackageId)">@Model.PackageId.Abbreviate(50)</a></h1>
            @if (Model.Owners.Any())
            {
                @ViewHelpers.AlertInfo(
                    @<text>
                        By submitting this form, you agree to disclose your email address
                        to the package owners listed below so they can reply to you.
                    </text>
                );

                using (Html.BeginForm())
                {
                    @Html.AntiForgeryToken()

                    <div class="form-group">
                        <label>To</label>
                        <p>
                            @foreach (var owner in Model.Owners)
                            {
                                <a href="@Url.User(owner)" title="View @owner.Username's profile" class="ms-font-xl">@owner.Username</a>
                            }
                        </p>
                    </div>
                    <div class="form-group">
                        <label>From</label>
                        <p class="ms-font-xl">@CurrentUser.EmailAddress</p>
                    </div>
                    <div class="form-group @Html.HasErrorFor(m => m.Message)">
                        @Html.ShowLabelFor(m => m.Message)
                        @Html.ShowTextAreaFor(m => m.Message, 10, 50)
                        @Html.ShowValidationMessagesFor(m => m.Message)
                    </div>
                    <div class="form-group @Html.HasErrorFor(m => m.CopySender)">
                        @Html.ShowCheckboxFor(m => m.CopySender)
                        @Html.ShowLabelFor(m => m.CopySender)
                        @Html.ShowValidationMessagesFor(m => m.CopySender)
                    </div>
                    <div class="form-group">
                        <input type="submit" class="btn btn-primary form-control" value="Send" />
                    </div>
                }
            }
            else
            {
                @ViewHelpers.AlertWarning(
                    @<text>
                        Sorry, the owners of this package do not allow contacting them through this form.

                        @if (string.IsNullOrEmpty(Model.ProjectUrl))
                        {
                            @:You can try contacting the package owners of "@Model.PackageId" through its <a href="@Model.ProjectUrl">Project Site</a>
                        }
                        else
                        {
                            @:You'll have to find some other way to contact them.
                        }
                    </text>
                );
            }
            </div>
    </div>
</section>
