<Project Sdk="Microsoft.NET.Sdk">

  <Import Project="..\..\SdkProjects.props" />

  <PropertyGroup>
    <TargetFrameworks>net472;netstandard2.1</TargetFrameworks>
    <RootNamespace>NuGetGallery</RootNamespace>
    <Description>Core support library for NuGet Gallery Frontend and Backend</Description>
  </PropertyGroup>

  <ItemGroup Condition="'$(TargetFramework)' == 'netstandard2.1'">
    <Compile Remove="Auditing\AuditActor.cs" />
    <Compile Remove="Auditing\AuditEntry.cs" />
    <Compile Remove="Auditing\AuditingService.cs" />
    <Compile Remove="Auditing\CloudAuditingService.cs" />
    <Compile Remove="Auditing\FileSystemAuditingService.cs" />
    <Compile Remove="Cookies\CookieComplianceService.cs" />
    <Compile Remove="Cookies\CookieExpirationService.cs" />
    <Compile Remove="Cookies\ICookieComplianceService.cs" />
    <Compile Remove="Cookies\ICookieExpirationService.cs" />
    <Compile Remove="Cookies\NullCookieComplianceService.cs" />
    <Compile Remove="Entities\SuspendDbExecutionStrategy.cs" />
    <Compile Remove="Extensions\PackageValidationSetExtensions.cs" />
    <Compile Remove="Extensions\ValidationIssueExtensions.cs" />
    <Compile Remove="Infrastructure\Mail\Messages\CredentialRevokedMessage.cs" />
    <Compile Remove="Infrastructure\Mail\Messages\PackageAddedMessage.cs" />
    <Compile Remove="Infrastructure\Mail\Messages\PackageValidationFailedMessage.cs" />
    <Compile Remove="Infrastructure\Mail\Messages\PackageValidationTakingTooLongMessage.cs" />
    <Compile Remove="Infrastructure\Mail\Messages\SymbolPackageAddedMessage.cs" />
    <Compile Remove="Infrastructure\Mail\Messages\SymbolPackageValidationFailedMessage.cs" />
    <Compile Remove="Infrastructure\Mail\Messages\SymbolPackageValidationTakingTooLongMessage.cs" />
    <Compile Remove="Services\CorePackageFileService.cs" />
  </ItemGroup>

  <ItemGroup>
    <None Remove="Infrastructure\MigrateUserToOrganization.sql" />
  </ItemGroup>

  <ItemGroup>
    <EmbeddedResource Include="Infrastructure\MigrateUserToOrganization.sql" />
  </ItemGroup>

  <ItemGroup>
    <PackageReference Include="WindowsAzure.Storage" Version="9.3.3" />

    <PackageReference Include="Azure.Core" Version="1.39.0" />
    <PackageReference Include="Azure.Identity" Version="1.11.3" />
    <PackageReference Include="Azure.Storage.Blobs" Version="12.20.0" />
    <PackageReference Include="EntityFramework" Version="6.4.4" />
    <PackageReference Include="NuGet.Packaging">
      <Version>$(NuGetClientPackageVersion)</Version>
    </PackageReference>
    <PackageReference Include="NuGet.Services.FeatureFlags">
      <Version>$(ServerCommonPackageVersion)</Version>
    </PackageReference>
  </ItemGroup>
  
  <ItemGroup Condition="'$(TargetFramework)' == 'net472'">
    <PackageReference Include="NuGet.Services.Messaging.Email">
      <Version>$(ServerCommonPackageVersion)</Version>
    </PackageReference>
    <PackageReference Include="NuGet.Services.Validation">
      <Version>$(ServerCommonPackageVersion)</Version>
    </PackageReference>
    <PackageReference Include="NuGet.Services.Validation.Issues">
      <Version>$(ServerCommonPackageVersion)</Version>
    </PackageReference>
    <PackageReference Include="Microsoft.Data.Services.Client">
      <Version>5.8.4</Version>
    </PackageReference>
    <PackageReference Include="Microsoft.WindowsAzure.ConfigurationManager">
      <Version>3.2.3</Version>
    </PackageReference>
  </ItemGroup>
  
  <ItemGroup>
    <ProjectReference Include="..\NuGet.Services.Entities\NuGet.Services.Entities.csproj" />
  </ItemGroup>
  
  <ItemGroup>
    <Compile Update="CoreStrings.Designer.cs">
      <DesignTime>True</DesignTime>
      <AutoGen>True</AutoGen>
      <DependentUpon>CoreStrings.resx</DependentUpon>
    </Compile>
  </ItemGroup>
  
  <ItemGroup>
    <EmbeddedResource Update="CoreStrings.resx">
      <Generator>PublicResXFileCodeGenerator</Generator>
      <LastGenOutput>CoreStrings.Designer.cs</LastGenOutput>
    </EmbeddedResource>
  </ItemGroup>

</Project>
